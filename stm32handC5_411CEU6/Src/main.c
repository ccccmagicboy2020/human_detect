/* USER CODE BEGIN Header */


/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "sys.h"
#include "crc.h"
#include "usart.h"
#include "gpio.h"
#include "app_x-cube-ai.h"
#include "stdio.h"
#include "adc.h"
#include "timer.h"
#include "math.h" 
#include "arm_math.h" 
#include "delay.h"
#include "led.h"
#include "cfar_ca.h"

//const float xc[1000] = 
//{
//0.142,0.171,0.066,0.157,0.251,0.384,0.454,0.733,0.540,0.821,0.766,0.515,0.487,0.374,0.486,0.488,0.228,0.626,0.460,0.423,0.487,0.567,0.292,0.293,0.322,0.340,0.252,0.394,0.476,0.483,0.439,0.727,0.271,0.148,0.332,0.483,0.215,0.359,0.573,0.495,0.273,0.493,0.231,0.377,0.238,0.203,0.377,0.283,0.351,0.535,0.655,0.444,0.114,0.372,0.462,0.372,0.141,0.379,0.270,0.663,0.415,0.298,0.141,0.395,0.253,0.516,0.207,0.342,0.362,0.519,0.365,0.330,0.095,0.536,0.141,0.339,0.105,0.320,0.589,0.412,0.252,0.339,0.075,0.407,0.192,0.315,0.249,0.597,0.348,0.677,0.811,0.445,0.112,0.140,0.297,0.254,0.390,0.790,0.649,0.687,0.657,0.572,0.282,0.308,0.072,0.286,0.304,0.553,0.484,0.533,0.607,0.482,0.213,0.332,0.129,0.309,0.019,0.591,0.505,0.731,0.420,0.402,0.292,0.410,0.515,0.442,0.346,0.584,0.487,0.595,0.284,0.285,0.381,0.365,0.337,0.485,0.096,0.651,0.593,0.970,0.768,0.328,0.189,0.423,0.291,0.417,0.529,0.449,0.341,0.599,0.602,0.467,0.391,0.258,0.029,0.475,0.651,0.336,0.335,0.830,0.370,0.562,0.305,0.629,0.064,0.350,0.334,0.633,0.623,0.624,0.347,0.763,0.303,0.521,0.194,0.204,0.302,0.604,0.331,0.945,0.774,0.748,0.380,0.516,0.184,0.408,0.514,0.637,0.522,0.803,0.371,0.705,0.145,0.427,0.210,0.261,0.452,0.563,0.411,0.523,0.502,0.384,0.310,0.282,0.445,0.624,0.092,0.723,0.553,0.838,0.682,0.326,0.341,0.274,0.368,0.518,0.252,0.578,0.688,0.951,0.445,0.614,0.224,0.588,0.392,0.376,0.253,0.778,0.384,1.042,0.588,0.675,0.307,0.521,0.109,0.739,0.232,0.797,0.614,1.318,0.614,1.070,0.081,0.609,0.497,0.968,0.124,0.643,0.708,1.034,0.664,0.978,0.203,0.236,0.530,0.610,0.473,0.436,0.940,1.022,1.116,0.903,0.789,0.255,0.596,0.376,0.564,0.810,0.833,0.883,0.554,0.804,0.607,0.350,0.164,0.712,0.407,0.948,0.713,1.237,1.000,1.059,0.608,0.815,0.414,1.133,0.241,1.182,0.548,1.485,0.557,1.214,0.455,0.969,0.123,1.107,0.320,0.771,0.918,1.640,0.798,1.389,0.403,1.270,0.323,0.621,0.694,0.827,0.598,1.458,0.674,1.037,0.162,0.406,0.626,0.525,0.905,0.637,0.964,0.611,0.915,0.551,0.810,0.616,0.629,1.203,0.946,0.783,1.350,1.236,1.411,1.023,0.559,0.245,0.498,0.775,0.811,0.787,1.181,1.195,1.342,1.341,0.633,1.037,0.798,0.744,1.415,1.387,0.994,1.446,1.272,2.123,0.542,1.593,0.429,1.567,0.872,1.796,1.065,2.477,0.536,1.665,0.479,1.882,1.072,1.311,1.142,2.387,0.784,2.473,0.485,2.100,1.089,1.341,1.672,1.536,2.192,1.021,3.078,1.438,2.180,0.803,2.214,0.762,2.187,0.709,2.426,1.336,3.951,0.520,3.333,0.174,2.559,0.911,1.616,1.686,2.434,1.764,2.651,2.857,2.474,3.224,1.555,2.834,0.961,3.218,1.550,3.734,2.280,5.171,1.786,5.774,0.275,5.737,0.884,4.027,2.813,4.949,3.624,6.801,4.392,7.347,3.229,4.403,3.755,4.150,7.027,6.116,8.311,5.497,6.798,4.808,7.056,2.789,8.014,3.627,7.243,5.254,9.751,4.503,7.398,5.372,6.524,8.816,7.748,6.773,7.292,6.625,6.396,12.279,6.027,11.206,5.391,11.425,0.577,11.177,1.987,11.737,3.715,12.933,1.030,16.051,6.026,4.708,2.908,5.139,5.202,8.210,8.371,2.895,11.993,9.880,5.055,12.117,7.079,9.217,14.627,9.122,16.231,13.745,19.570,18.549,12.625,12.389,15.809,12.700,12.210,8.013,10.735,10.486,9.281,16.645,5.734,10.492,10.746,5.394,15.717,7.944,6.321,1.297,1.297,6.321,7.944,15.717,5.394,10.746,10.492,5.734,16.645,9.281,10.486,10.735,8.013,12.210,12.700,15.809,12.389,12.625,18.549,19.570,13.745,16.231,9.122,14.627,9.217,7.079,12.117,5.055,9.880,11.993,2.895,8.371,8.210,5.202,5.139,2.908,4.708,6.026,16.051,1.030,12.933,3.715,11.737,1.987,11.177,0.577,11.425,5.391,11.206,6.027,12.279,6.396,6.625,7.292,6.773,7.748,8.816,6.524,5.372,7.398,4.503,9.751,5.254,7.243,3.627,8.014,2.789,7.056,4.808,6.798,5.497,8.311,6.116,7.027,4.150,3.755,4.403,3.229,7.347,4.392,6.801,3.624,4.949,2.813,4.027,0.884,5.737,0.275,5.774,1.786,5.171,2.280,3.734,1.550,3.218,0.961,2.834,1.555,3.224,2.474,2.857,2.651,1.764,2.434,1.686,1.616,0.911,2.559,0.174,3.333,0.520,3.951,1.336,2.426,0.709,2.187,0.762,2.214,0.803,2.180,1.438,3.078,1.021,2.192,1.536,1.672,1.341,1.089,2.100,0.485,2.473,0.784,2.387,1.142,1.311,1.072,1.882,0.479,1.665,0.536,2.477,1.065,1.796,0.872,1.567,0.429,1.593,0.542,2.123,1.272,1.446,0.994,1.387,1.415,0.744,0.798,1.037,0.633,1.341,1.342,1.195,1.181,0.787,0.811,0.775,0.498,0.245,0.559,1.023,1.411,1.236,1.350,0.783,0.946,1.203,0.629,0.616,0.810,0.551,0.915,0.611,0.964,0.637,0.905,0.525,0.626,0.406,0.162,1.037,0.674,1.458,0.598,0.827,0.694,0.621,0.323,1.270,0.403,1.389,0.798,1.640,0.918,0.771,0.320,1.107,0.123,0.969,0.455,1.214,0.557,1.485,0.548,1.182,0.241,1.133,0.414,0.815,0.608,1.059,1.000,1.237,0.713,0.948,0.407,0.712,0.164,0.350,0.607,0.804,0.554,0.883,0.833,0.810,0.564,0.376,0.596,0.255,0.789,0.903,1.116,1.022,0.940,0.436,0.473,0.610,0.530,0.236,0.203,0.978,0.664,1.034,0.708,0.643,0.124,0.968,0.497,0.609,0.081,1.070,0.614,1.318,0.614,0.797,0.232,0.739,0.109,0.521,0.307,0.675,0.588,1.042,0.384,0.778,0.253,0.376,0.392,0.588,0.224,0.614,0.445,0.951,0.688,0.578,0.252,0.518,0.368,0.274,0.341,0.326,0.682,0.838,0.553,0.723,0.092,0.624,0.445,0.282,0.310,0.384,0.502,0.523,0.411,0.563,0.452,0.261,0.210,0.427,0.145,0.705,0.371,0.803,0.522,0.637,0.514,0.408,0.184,0.516,0.380,0.748,0.774,0.945,0.331,0.604,0.302,0.204,0.194,0.521,0.303,0.763,0.347,0.624,0.623,0.633,0.334,0.350,0.064,0.629,0.305,0.562,0.370,0.830,0.335,0.336,0.651,0.475,0.029,0.258,0.391,0.467,0.602,0.599,0.341,0.449,0.529,0.417,0.291,0.423,0.189,0.328,0.768,0.970,0.593,0.651,0.096,0.485,0.337,0.365,0.381,0.285,0.284,0.595,0.487,0.584,0.346,0.442,0.515,0.410,0.292,0.402,0.420,0.731,0.505,0.591,0.019,0.309,0.129,0.332,0.213,0.482,0.607,0.533,0.484,0.553,0.304,0.286,0.072,0.308,0.282,0.572,0.657,0.687,0.649,0.790,0.390,0.254,0.297,0.140,0.112,0.445,0.811,0.677,0.348,0.597,0.249,0.315,0.192,0.407,0.075,0.339,0.252,0.412,0.589,0.320,0.105,0.339,0.141,0.536,0.095,0.330,0.365,0.519,0.362,0.342,0.207,0.516,0.253,0.395,0.141,0.298,0.415,0.663,0.270,0.379,0.141,0.372,0.462,0.372,0.114,0.444,0.655,0.535,0.351,0.283,0.377,0.203,0.238,0.377,0.231,0.493,0.273,0.495,0.573,0.359,0.215,0.483,0.332,0.148,0.271,0.727,0.439,0.483,0.476,0.394,0.252,0.340,0.322,0.293,0.292,0.567,0.487,0.423,0.460,0.626,0.228,0.488,0.486,0.374,0.487,0.515,0.766,0.821,0.540,0.733,0.454,0.384,0.251,0.157,0.066,0.171,0.142
//};

const float xc[2000] = 
{
0.204574504,
0.461730917,
0.23470604,
0.185159934,
0.452962251,
0.51394281,
0.455584939,
0.114400875,
0.544336353,
0.685205626,
0.400851945,
0.382372914,
0.678463023,
1.026241159,
1.150474863,
1.665878423,
1.521131585,
2.421052101,
1.548114435,
1.610554825,
1.511135282,
1.163143643,
0.489126423,
0.362990916,
0.652020844,
0.407232157,
0.54619046,
0.653391214,
0.540802012,
0.580194937,
0.213402459,
0.916072811,
1.132636789,
0.906614179,
1.111743683,
1.414222152,
1.145348574,
0.518112308,
1.157271349,
1.348432666,
0.667683419,
0.752312432,
1.144353521,
0.94532509,
0.695636814,
0.670725769,
1.077555981,
1.045162867,
0.669094701,
0.86489413,
1.193437514,
1.096386781,
0.640084157,
0.772134287,
0.738885825,
1.126028202,
1.095674584,
0.402147671,
0.874325596,
0.494759154,
0.154279568,
0.458647408,
1.172572019,
1.637818698,
0.952822125,
0.363648727,
0.809405511,
0.607070363,
0.643737755,
1.198300088,
1.194999784,
1.000086464,
0.967520546,
0.828777475,
1.311752987,
1.167685561,
0.717780858,
0.501645258,
0.804937889,
1.057435628,
0.899010912,
0.679601898,
0.222882297,
0.268613669,
0.16623272,
0.510689147,
0.975185367,
1.484983239,
1.438546861,
1.103503669,
0.340084507,
0.137016606,
0.384335399,
0.355797372,
0.550041456,
0.392442469,
0.219440957,
0.388242777,
1.310076443,
1.515409462,
1.033432458,
0.718601919,
0.553713727,
0.671113391,
0.612070874,
0.602153327,
0.384837438,
0.614213475,
0.66271106,
0.896823644,
1.065046982,
0.991704106,
0.95530484,
0.838277488,
1.265134523,
1.672006112,
1.483131471,
0.814446401,
1.213032597,
1.175607095,
1.470967136,
1.865021623,
2.136273879,
1.956175863,
1.76466537,
1.377862253,
1.077919749,
1.866530607,
2.075967703,
1.497847502,
0.043112706,
0.358903359,
0.415747819,
0.649240651,
0.891018995,
1.880094457,
1.924052303,
1.382356551,
1.221541041,
1.243243228,
0.756446894,
0.244573917,
0.809799846,
1.069666871,
0.662333558,
0.322766534,
0.718378519,
1.028964034,
0.462576442,
0.397588707,
1.066165302,
0.924159091,
0.895315179,
0.918694613,
0.787456696,
0.332567551,
0.509582426,
0.491975852,
0.45954457,
1.012771565,
0.592472389,
0.403685485,
0.385671589,
0.023254061,
0.281541428,
0.772678367,
0.683022694,
0.622616132,
0.910145454,
0.49885914,
0.433055035,
0.236117736,
1.058424757,
0.835336581,
0.167117265,
0.728118738,
0.786915689,
0.687975848,
1.160592655,
1.229914015,
1.204429279,
1.140569495,
0.249428404,
0.696464342,
1.189503495,
1.389228393,
0.710474125,
0.681277989,
0.279287201,
0.676183548,
0.688434327,
0.266972775,
0.718223284,
1.176167536,
1.859793922,
1.491223595,
0.834181087,
0.8547698,
1.082045724,
0.546314502,
0.808105269,
0.816797735,
0.862742083,
1.09801297,
1.896967098,
1.848024729,
1.008622696,
0.161740015,
0.587783059,
0.601673745,
1.147914408,
1.747484435,
0.994741585,
0.656905263,
0.77490502,
0.666835583,
1.0488708,
1.565328476,
0.903506078,
0.068156685,
0.598667801,
0.792842485,
1.132523162,
1.625200896,
1.715756473,
1.2148444,
0.579878853,
0.396944926,
1.022078834,
1.719686993,
1.652498812,
0.72944537,
1.175983956,
1.36198167,
1.277417338,
1.334173807,
1.928660568,
1.880592425,
1.940539663,
1.929190843,
1.482035184,
0.76835741,
1.197114715,
1.317225275,
1.440968562,
1.584379366,
2.306103551,
2.022191908,
1.993235014,
2.55141232,
2.098108499,
0.893258762,
0.76986075,
1.610762046,
1.621994697,
2.054565718,
2.801025384,
2.582262029,
2.41670197,
1.792741337,
1.201914689,
1.452081076,
1.64225537,
2.62789644,
2.873204749,
2.502673408,
1.996023035,
1.911445055,
1.548270273,
1.058367951,
0.823834476,
1.055116691,
1.794677576,
2.144112317,
1.722472347,
1.624659736,
2.107578657,
1.795942653,
1.911638413,
1.057258392,
0.3535299,
0.391552477,
0.319073441,
0.212085166,
0.357812025,
1.088641657,
2.031526665,
1.845501422,
0.971099814,
0.549640149,
1.361588606,
1.271481127,
1.201818125,
1.094810954,
0.99051798,
1.107340171,
0.35083509,
0.492733998,
1.037636291,
2.508624656,
2.749183186,
2.381668514,
1.911101153,
2.075089378,
1.178522275,
1.397034411,
1.979057305,
1.698260911,
2.558620923,
2.436069671,
1.429825583,
1.565849724,
2.720578992,
2.644519484,
1.333683144,
1.608471044,
2.266130978,
1.574190652,
0.530259489,
1.375460079,
0.909238696,
1.153321541,
2.805708126,
1.83615498,
0.324304704,
1.410687923,
1.352867587,
0.790811331,
1.7139132,
1.504822443,
0.799996921,
2.333530447,
2.124609675,
1.29234794,
1.080136518,
1.455037885,
2.17610772,
1.901261624,
0.339846923,
0.950129802,
1.370474724,
3.183786874,
3.182193448,
1.881787222,
1.750978127,
1.736757411,
2.1811455,
2.474241644,
1.830064292,
1.395423711,
2.156612666,
1.693013934,
0.457154713,
1.91178774,
1.117596907,
1.621044412,
2.233390723,
2.044821272,
0.901688574,
1.269890986,
1.770239656,
1.901604915,
1.015571587,
1.544276611,
2.360420522,
1.652872912,
1.542784399,
1.496710681,
0.846783063,
2.031167739,
2.394896606,
1.178592746,
1.380811904,
2.494943907,
2.906089332,
3.883975418,
3.946883818,
3.262809847,
0.311139695,
0.847394842,
1.200700596,
2.113485316,
2.705870431,
0.937206661,
0.123758398,
0.525641948,
1.625898543,
1.337229806,
1.117851623,
0.807091171,
0.541298689,
0.680972714,
2.065716245,
1.998793217,
1.726487936,
0.579417395,
0.511660673,
0.514664721,
0.344433528,
0.469521085,
1.354475496,
1.337733005,
0.417950382,
0.386079247,
0.342088481,
1.096272438,
1.643021417,
1.644104587,
0.665172914,
1.327422724,
1.712427527,
1.653919516,
0.802836307,
1.070032995,
1.845561737,
0.85932338,
0.356360977,
0.763952229,
1.274220509,
0.930047066,
2.641570966,
2.118289335,
1.945267627,
1.140884156,
0.436618005,
0.286619824,
1.899786601,
2.199747471,
2.809165973,
2.594545807,
2.285059446,
1.618156269,
1.357727788,
2.1097211,
1.758073958,
2.072606158,
2.391638573,
2.724200861,
2.449599446,
1.767958828,
1.31967401,
2.598397135,
2.790551173,
3.398952291,
2.536122443,
1.140426774,
1.421106966,
2.388055565,
2.492229467,
2.272324565,
2.294621387,
1.950140334,
2.69828264,
4.261279917,
5.003455245,
2.345731232,
0.971483528,
1.196493555,
1.833310478,
1.895264253,
1.254030397,
1.378345194,
1.830290186,
1.977144027,
1.562170193,
1.733910916,
1.331542099,
0.721619986,
0.64189144,
1.636437337,
1.129823922,
1.422783043,
1.660528692,
0.800476073,
0.865352201,
0.579500603,
1.589799891,
2.152726662,
1.679506815,
0.424951656,
1.484718345,
3.704675515,
5.521892969,
5.227603429,
2.965499413,
1.189819181,
3.590391352,
5.905641981,
4.18298789,
1.744762221,
1.983021845,
1.456583864,
1.219075311,
1.229930453,
1.029398468,
0.873625529,
1.407840847,
2.452410614,
2.389061421,
1.50167447,
2.885815343,
3.493740095,
3.088512507,
1.968978226,
2.73758915,
2.372753483,
2.904335699,
3.188667377,
2.185952359,
1.660883424,
1.725828223,
2.037919098,
5.087872414,
7.066008102,
5.721880175,
1.814756272,
2.857504202,
6.393967574,
4.61009259,
0.521767689,
2.582348408,
3.464947803,
0.991747221,
1.515276532,
2.428316173,
4.252874514,
3.407374074,
3.26436274,
1.524133164,
1.816515641,
1.559148058,
1.555168644,
0.648105522,
0.422246532,
1.907898561,
3.120158408,
1.442961702,
1.859516696,
3.816965177,
3.682269224,
1.320543787,
0.839527133,
2.294993978,
5.87733568,
5.28751432,
2.393119677,
2.100997359,
2.227531085,
2.669128414,
3.980463174,
2.568130218,
1.436177282,
1.723563325,
2.269598509,
3.223199221,
2.999039985,
3.153101877,
1.402154975,
0.789601565,
2.483706498,
3.248819282,
1.917021334,
1.904058061,
1.744415986,
2.645559827,
1.325413317,
0.718049075,
3.252979353,
3.300655108,
2.19060109,
1.895583805,
2.301168562,
4.233699774,
1.950418525,
2.216122061,
4.67226783,
3.479701037,
1.389777871,
2.909624463,
1.172344412,
3.292234958,
5.946717895,
6.4681493,
4.372811436,
0.43864082,
3.452534732,
4.988655801,
2.997776842,
4.082655289,
5.107420826,
3.902075003,
1.929043369,
1.218399334,
2.156620068,
4.513410747,
3.32309145,
1.251479255,
3.1566017,
2.521163875,
1.011944451,
1.610374576,
1.233863138,
2.292022249,
1.455554448,
1.104556871,
4.130749877,
5.292913087,
3.494586539,
6.189021913,
9.066554236,
6.958854097,
6.392746015,
8.737133932,
5.969300078,
8.604285034,
11.0588761,
9.689262024,
4.995484533,
7.466411156,
9.648423633,
6.820004574,
7.445425469,
8.670757597,
8.8872792,
4.941938581,
4.619912626,
4.605873171,
5.639456864,
5.805964427,
4.066984043,
2.770035018,
2.396528174,
3.452856199,
4.775845233,
3.73155946,
4.982764763,
4.520288706,
6.055452718,
4.986314518,
2.14970263,
6.513439491,
9.819495864,
5.517895613,
8.586513664,
11.40102767,
12.23290235,
10.28391903,
11.85846837,
12.86998001,
9.639765959,
12.98393493,
13.80672729,
11.43108806,
10.88862429,
4.614949175,
5.458336637,
5.237722946,
3.764365411,
3.81545446,
5.1167631,
7.586410691,
6.90105872,
7.502862764,
11.22185572,
8.929763264,
10.3000678,
13.15359808,
11.31677827,
7.024927216,
8.008443733,
11.02891559,
9.751143629,
8.24893801,
11.29914039,
15.68997064,
19.39573399,
19.80955955,
20.5586806,
19.00537659,
23.7385032,
23.11466515,
22.62707259,
26.44106814,
21.6089378,
16.98282445,
23.46719952,
23.31705108,
11.42736809,
12.3459345,
14.45354688,
10.14278111,
6.107241274,
2.461091266,
4.257679076,
3.93267722,
5.13419325,
7.975649084,
5.662587686,
13.78873679,
17.1375719,
12.89624363,
12.36836674,
14.85217574,
12.43931141,
14.67279048,
9.014234779,
7.0678639,
10.91672202,
10.72238733,
3.680262635,
4.369103965,
4.289218466,
4.489932889,
7.796241978,
10.35839481,
8.515813312,
2.639315917,
8.745116219,
15.09157871,
12.79034443,
4.550135672,
1.816117409,
1.950666768,
3.204903473,
2.944468975,
8.429541961,
5.647909446,
4.712124351,
9.049347762,
7.6361094,
6.51109927,
5.770369719,
8.761722669,
8.382442234,
6.426279967,
3.297103861,
5.397987228,
10.10505418,
14.4585572,
7.986533182,
8.072662349,
10.3916411,
15.37480243,
15.42440184,
17.30445319,
21.20687134,
25.72861462,
27.7002082,
19.74402171,
20.95532413,
19.19388081,
13.62804704,
14.21759898,
14.42246243,
12.16794541,
11.84083254,
12.94212365,
15.5367063,
6.191505075,
8.70198772,
11.77251448,
14.68396791,
4.367771192,
13.65030029,
11.93335377,
5.475173383,
10.19424932,
15.03193486,
11.60596798,
4.119821395,
15.44061103,
11.55958459,
9.806122417,
20.47191282,
14.5545656,
8.566647559,
5.339771068,
8.773684933,
10.13427064,
13.70590126,
13.40190408,
20.2574752,
10.76550382,
4.949782311,
8.218814237,
10.69955908,
6.058918084,
1.825991279,
1.582030891,
6.779937348,
12.35807333,
8.325983641,
5.012197578,
10.11717624,
10.99996916,
3.506802913,
5.037695778,
1.962339418,
9.669714781,
5.137195287,
5.137195287,
9.669714781,
1.962339418,
5.037695778,
3.506802913,
10.99996916,
10.11717624,
5.012197578,
8.325983641,
12.35807333,
6.779937348,
1.582030891,
1.825991279,
6.058918084,
10.69955908,
8.218814237,
4.949782311,
10.76550382,
20.2574752,
13.40190408,
13.70590126,
10.13427064,
8.773684933,
5.339771068,
8.566647559,
14.5545656,
20.47191282,
9.806122417,
11.55958459,
15.44061103,
4.119821395,
11.60596798,
15.03193486,
10.19424932,
5.475173383,
11.93335377,
13.65030029,
4.367771192,
14.68396791,
11.77251448,
8.70198772,
6.191505075,
15.5367063,
12.94212365,
11.84083254,
12.16794541,
14.42246243,
14.21759898,
13.62804704,
19.19388081,
20.95532413,
19.74402171,
27.7002082,
25.72861462,
21.20687134,
17.30445319,
15.42440184,
15.37480243,
10.3916411,
8.072662349,
7.986533182,
14.4585572,
10.10505418,
5.397987228,
3.297103861,
6.426279967,
8.382442234,
8.761722669,
5.770369719,
6.51109927,
7.6361094,
9.049347762,
4.712124351,
5.647909446,
8.429541961,
2.944468975,
3.204903473,
1.950666768,
1.816117409,
4.550135672,
12.79034443,
15.09157871,
8.745116219,
2.639315917,
8.515813312,
10.35839481,
7.796241978,
4.489932889,
4.289218466,
4.369103965,
3.680262635,
10.72238733,
10.91672202,
7.0678639,
9.014234779,
14.67279048,
12.43931141,
14.85217574,
12.36836674,
12.89624363,
17.1375719,
13.78873679,
5.662587686,
7.975649084,
5.13419325,
3.93267722,
4.257679076,
2.461091266,
6.107241274,
10.14278111,
14.45354688,
12.3459345,
11.42736809,
23.31705108,
23.46719952,
16.98282445,
21.6089378,
26.44106814,
22.62707259,
23.11466515,
23.7385032,
19.00537659,
20.5586806,
19.80955955,
19.39573399,
15.68997064,
11.29914039,
8.24893801,
9.751143629,
11.02891559,
8.008443733,
7.024927216,
11.31677827,
13.15359808,
10.3000678,
8.929763264,
11.22185572,
7.502862764,
6.90105872,
7.586410691,
5.1167631,
3.81545446,
3.764365411,
5.237722946,
5.458336637,
4.614949175,
10.88862429,
11.43108806,
13.80672729,
12.98393493,
9.639765959,
12.86998001,
11.85846837,
10.28391903,
12.23290235,
11.40102767,
8.586513664,
5.517895613,
9.819495864,
6.513439491,
2.14970263,
4.986314518,
6.055452718,
4.520288706,
4.982764763,
3.73155946,
4.775845233,
3.452856199,
2.396528174,
2.770035018,
4.066984043,
5.805964427,
5.639456864,
4.605873171,
4.619912626,
4.941938581,
8.8872792,
8.670757597,
7.445425469,
6.820004574,
9.648423633,
7.466411156,
4.995484533,
9.689262024,
11.0588761,
8.604285034,
5.969300078,
8.737133932,
6.392746015,
6.958854097,
9.066554236,
6.189021913,
3.494586539,
5.292913087,
4.130749877,
1.104556871,
1.455554448,
2.292022249,
1.233863138,
1.610374576,
1.011944451,
2.521163875,
3.1566017,
1.251479255,
3.32309145,
4.513410747,
2.156620068,
1.218399334,
1.929043369,
3.902075003,
5.107420826,
4.082655289,
2.997776842,
4.988655801,
3.452534732,
0.43864082,
4.372811436,
6.4681493,
5.946717895,
3.292234958,
1.172344412,
2.909624463,
1.389777871,
3.479701037,
4.67226783,
2.216122061,
1.950418525,
4.233699774,
2.301168562,
1.895583805,
2.19060109,
3.300655108,
3.252979353,
0.718049075,
1.325413317,
2.645559827,
1.744415986,
1.904058061,
1.917021334,
3.248819282,
2.483706498,
0.789601565,
1.402154975,
3.153101877,
2.999039985,
3.223199221,
2.269598509,
1.723563325,
1.436177282,
2.568130218,
3.980463174,
2.669128414,
2.227531085,
2.100997359,
2.393119677,
5.28751432,
5.87733568,
2.294993978,
0.839527133,
1.320543787,
3.682269224,
3.816965177,
1.859516696,
1.442961702,
3.120158408,
1.907898561,
0.422246532,
0.648105522,
1.555168644,
1.559148058,
1.816515641,
1.524133164,
3.26436274,
3.407374074,
4.252874514,
2.428316173,
1.515276532,
0.991747221,
3.464947803,
2.582348408,
0.521767689,
4.61009259,
6.393967574,
2.857504202,
1.814756272,
5.721880175,
7.066008102,
5.087872414,
2.037919098,
1.725828223,
1.660883424,
2.185952359,
3.188667377,
2.904335699,
2.372753483,
2.73758915,
1.968978226,
3.088512507,
3.493740095,
2.885815343,
1.50167447,
2.389061421,
2.452410614,
1.407840847,
0.873625529,
1.029398468,
1.229930453,
1.219075311,
1.456583864,
1.983021845,
1.744762221,
4.18298789,
5.905641981,
3.590391352,
1.189819181,
2.965499413,
5.227603429,
5.521892969,
3.704675515,
1.484718345,
0.424951656,
1.679506815,
2.152726662,
1.589799891,
0.579500603,
0.865352201,
0.800476073,
1.660528692,
1.422783043,
1.129823922,
1.636437337,
0.64189144,
0.721619986,
1.331542099,
1.733910916,
1.562170193,
1.977144027,
1.830290186,
1.378345194,
1.254030397,
1.895264253,
1.833310478,
1.196493555,
0.971483528,
2.345731232,
5.003455245,
4.261279917,
2.69828264,
1.950140334,
2.294621387,
2.272324565,
2.492229467,
2.388055565,
1.421106966,
1.140426774,
2.536122443,
3.398952291,
2.790551173,
2.598397135,
1.31967401,
1.767958828,
2.449599446,
2.724200861,
2.391638573,
2.072606158,
1.758073958,
2.1097211,
1.357727788,
1.618156269,
2.285059446,
2.594545807,
2.809165973,
2.199747471,
1.899786601,
0.286619824,
0.436618005,
1.140884156,
1.945267627,
2.118289335,
2.641570966,
0.930047066,
1.274220509,
0.763952229,
0.356360977,
0.85932338,
1.845561737,
1.070032995,
0.802836307,
1.653919516,
1.712427527,
1.327422724,
0.665172914,
1.644104587,
1.643021417,
1.096272438,
0.342088481,
0.386079247,
0.417950382,
1.337733005,
1.354475496,
0.469521085,
0.344433528,
0.514664721,
0.511660673,
0.579417395,
1.726487936,
1.998793217,
2.065716245,
0.680972714,
0.541298689,
0.807091171,
1.117851623,
1.337229806,
1.625898543,
0.525641948,
0.123758398,
0.937206661,
2.705870431,
2.113485316,
1.200700596,
0.847394842,
0.311139695,
3.262809847,
3.946883818,
3.883975418,
2.906089332,
2.494943907,
1.380811904,
1.178592746,
2.394896606,
2.031167739,
0.846783063,
1.496710681,
1.542784399,
1.652872912,
2.360420522,
1.544276611,
1.015571587,
1.901604915,
1.770239656,
1.269890986,
0.901688574,
2.044821272,
2.233390723,
1.621044412,
1.117596907,
1.91178774,
0.457154713,
1.693013934,
2.156612666,
1.395423711,
1.830064292,
2.474241644,
2.1811455,
1.736757411,
1.750978127,
1.881787222,
3.182193448,
3.183786874,
1.370474724,
0.950129802,
0.339846923,
1.901261624,
2.17610772,
1.455037885,
1.080136518,
1.29234794,
2.124609675,
2.333530447,
0.799996921,
1.504822443,
1.7139132,
0.790811331,
1.352867587,
1.410687923,
0.324304704,
1.83615498,
2.805708126,
1.153321541,
0.909238696,
1.375460079,
0.530259489,
1.574190652,
2.266130978,
1.608471044,
1.333683144,
2.644519484,
2.720578992,
1.565849724,
1.429825583,
2.436069671,
2.558620923,
1.698260911,
1.979057305,
1.397034411,
1.178522275,
2.075089378,
1.911101153,
2.381668514,
2.749183186,
2.508624656,
1.037636291,
0.492733998,
0.35083509,
1.107340171,
0.99051798,
1.094810954,
1.201818125,
1.271481127,
1.361588606,
0.549640149,
0.971099814,
1.845501422,
2.031526665,
1.088641657,
0.357812025,
0.212085166,
0.319073441,
0.391552477,
0.3535299,
1.057258392,
1.911638413,
1.795942653,
2.107578657,
1.624659736,
1.722472347,
2.144112317,
1.794677576,
1.055116691,
0.823834476,
1.058367951,
1.548270273,
1.911445055,
1.996023035,
2.502673408,
2.873204749,
2.62789644,
1.64225537,
1.452081076,
1.201914689,
1.792741337,
2.41670197,
2.582262029,
2.801025384,
2.054565718,
1.621994697,
1.610762046,
0.76986075,
0.893258762,
2.098108499,
2.55141232,
1.993235014,
2.022191908,
2.306103551,
1.584379366,
1.440968562,
1.317225275,
1.197114715,
0.76835741,
1.482035184,
1.929190843,
1.940539663,
1.880592425,
1.928660568,
1.334173807,
1.277417338,
1.36198167,
1.175983956,
0.72944537,
1.652498812,
1.719686993,
1.022078834,
0.396944926,
0.579878853,
1.2148444,
1.715756473,
1.625200896,
1.132523162,
0.792842485,
0.598667801,
0.068156685,
0.903506078,
1.565328476,
1.0488708,
0.666835583,
0.77490502,
0.656905263,
0.994741585,
1.747484435,
1.147914408,
0.601673745,
0.587783059,
0.161740015,
1.008622696,
1.848024729,
1.896967098,
1.09801297,
0.862742083,
0.816797735,
0.808105269,
0.546314502,
1.082045724,
0.8547698,
0.834181087,
1.491223595,
1.859793922,
1.176167536,
0.718223284,
0.266972775,
0.688434327,
0.676183548,
0.279287201,
0.681277989,
0.710474125,
1.389228393,
1.189503495,
0.696464342,
0.249428404,
1.140569495,
1.204429279,
1.229914015,
1.160592655,
0.687975848,
0.786915689,
0.728118738,
0.167117265,
0.835336581,
1.058424757,
0.236117736,
0.433055035,
0.49885914,
0.910145454,
0.622616132,
0.683022694,
0.772678367,
0.281541428,
0.023254061,
0.385671589,
0.403685485,
0.592472389,
1.012771565,
0.45954457,
0.491975852,
0.509582426,
0.332567551,
0.787456696,
0.918694613,
0.895315179,
0.924159091,
1.066165302,
0.397588707,
0.462576442,
1.028964034,
0.718378519,
0.322766534,
0.662333558,
1.069666871,
0.809799846,
0.244573917,
0.756446894,
1.243243228,
1.221541041,
1.382356551,
1.924052303,
1.880094457,
0.891018995,
0.649240651,
0.415747819,
0.358903359,
0.043112706,
1.497847502,
2.075967703,
1.866530607,
1.077919749,
1.377862253,
1.76466537,
1.956175863,
2.136273879,
1.865021623,
1.470967136,
1.175607095,
1.213032597,
0.814446401,
1.483131471,
1.672006112,
1.265134523,
0.838277488,
0.95530484,
0.991704106,
1.065046982,
0.896823644,
0.66271106,
0.614213475,
0.384837438,
0.602153327,
0.612070874,
0.671113391,
0.553713727,
0.718601919,
1.033432458,
1.515409462,
1.310076443,
0.388242777,
0.219440957,
0.392442469,
0.550041456,
0.355797372,
0.384335399,
0.137016606,
0.340084507,
1.103503669,
1.438546861,
1.484983239,
0.975185367,
0.510689147,
0.16623272,
0.268613669,
0.222882297,
0.679601898,
0.899010912,
1.057435628,
0.804937889,
0.501645258,
0.717780858,
1.167685561,
1.311752987,
0.828777475,
0.967520546,
1.000086464,
1.194999784,
1.198300088,
0.643737755,
0.607070363,
0.809405511,
0.363648727,
0.952822125,
1.637818698,
1.172572019,
0.458647408,
0.154279568,
0.494759154,
0.874325596,
0.402147671,
1.095674584,
1.126028202,
0.738885825,
0.772134287,
0.640084157,
1.096386781,
1.193437514,
0.86489413,
0.669094701,
1.045162867,
1.077555981,
0.670725769,
0.695636814,
0.94532509,
1.144353521,
0.752312432,
0.667683419,
1.348432666,
1.157271349,
0.518112308,
1.145348574,
1.414222152,
1.111743683,
0.906614179,
1.132636789,
0.916072811,
0.213402459,
0.580194937,
0.540802012,
0.653391214,
0.54619046,
0.407232157,
0.652020844,
0.362990916,
0.489126423,
1.163143643,
1.511135282,
1.610554825,
1.548114435,
2.421052101,
1.521131585,
1.665878423,
1.150474863,
1.026241159,
0.678463023,
0.382372914,
0.400851945,
0.685205626,
0.544336353,
0.114400875,
0.455584939,
0.51394281,
0.452962251,
0.185159934,
0.23470604,
0.461730917,
0.204574504
};

void test2(void)
{
  float b_index[2000];
  float XT[2000];
	double N;
	double pro_N;
	double PAD;
	int index_size[2];
	
	int XT_size;
	int i;
	
	N = 300;
	pro_N = 200;
	PAD = 0.00000001;
	
	cfar_ca(xc, 1600, N, pro_N, PAD, b_index, index_size, XT);
	
	printf("index size is: %d\r\n", index_size[1]);
	
	XT_size = index_size[1];

	for (i=0;i<XT_size;i++)
	{
			printf("%d - %lf\r\n", i, b_index[i]);
	}

	for (i=0;i<XT_size;i++)
	{
			printf("XT: %d - %lf\r\n", i, XT[i]);
	}
}

int main(void)
{
			HAL_Init();
			Stm32_Clock_Init(200,25,2,7);
			
			delay_init(100);               	//初始化延时函数
			MY_ADC_Init();
			LED_Init();		//初始化LED	 
			
			
			TIM3_Init(40-1,5000-1);        // 100us  3.9ms
			
			
			TIM10_PWM_Init(500-1,100-1);    	//84M/84=1M的计数频率，自动重装载为500，那么PWM频率为1M/500=2kHZ  500-1
			TIM_SetTIM10Compare1(0); 	
			
			TIM4_PWM_Init(500-1,50-1);    	//84M/84=1M的计数频率，自动重装载为500，那么PWM频率为1M/500=2kHZ  500-1
			TIM_SetTIM4Compare1(0); 	
			
			MX_GPIO_Init();
			MX_CRC_Init();
			MX_USART1_UART_Init();
			
			while (1)
			{	
					delay_ms(1000);
					//
					test2();
			}
}



/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */

  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{ 
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     tex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */


